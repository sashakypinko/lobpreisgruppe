import{n as W,j as e,X as a,u as v,a as p,C as E,e as i,T as x,a2 as I,a9 as g,g as N,U as q,r as y,d as j,aa as z,h as F,A as G,i as O}from"./index.08fe98f9.js";import{o as _,C as h,S as C}from"./isTypedArray.de5e219e.js";import{u as k}from"./useError.062e31d1.js";import{G as V,R as f}from"./index.ae43450b.js";const B=W(e("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done"),H={icon:{color:"green",margin:15,fontSize:"4rem"},paper:{marginTop:"var(--theme-spacing-8)",display:"flex",flexDirection:"column",alignItems:"center"}},T=({text:s,button:o})=>{const r=v(H),{t:n}=p();return e(E,{maxWidth:"md",children:i("div",{className:r.paper,children:[e(B,{className:r.icon}),e(x,{align:"center",variant:"h5",children:n(s)}),o||""]})})};T.propTypes={text:a.exports.string.isRequired,button:a.exports.node};const S=({error:s,center:o,...r})=>{const{t:n}=p();return s?e(_,{error:!0,style:{textAlign:o?"center":"left"},...r,children:Array.isArray(s)?s.map(c=>i(I,{children:[c,e("br",{})]})):n(s)}):null};S.propTypes={error:a.exports.oneOfType([a.exports.string,a.exports.arrayOf(a.exports.string)]),center:a.exports.bool};const M=()=>{const{t:s}=p();return i(g,{container:!0,justifyContent:"center",alignContent:"center",alignItems:"center",children:[e(g,{item:!0,xs:12,children:e(x,{children:s("login.alreadyAccount")})}),e(g,{item:!0,xs:12,children:e(N,{to:q.LOGIN,button:!0,buttonProps:{fullWidth:!0,variant:"outlined"},children:s("login")})})]})},X={paper:{marginTop:"var(--theme-spacing-8)",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:"var(--theme-spacing-1)"},submit:{margin:"var(--theme-spacing-3_0_2)"}},Q=()=>{const s=v(X),{t:o}=p(),[r,n]=y.exports.useState({email:"",password:"",repeatPassword:""}),[c,b]=y.exports.useState(!1),{loading:A,Loading:D,setLoading:d}=j(),U={email:{type:"isEmail",text:"errorDescription.email"},password:{type:"isEmpty",text:"errorDescription.password"},repeatPassword:{customValidation:()=>r.password===r.repeatPassword,text:"password.shouldMatch"}},{setCustomError:u,isError:l,getActivateError:L,convertErrorArray:P}=k({values:r,validations:U});if(c)return e(T,{text:"signUp.successfulRegistration"});const R=async()=>{if(u(null),d(!0),L())d(!1);else{const t=await F.postRequest(G.signUp,{email:r.email,password:r.password});t.ok?b(!0):t.errorCode===O.USER_ALREADY_EXISTS?u({email:"user.alreadyExists"}):t.errorData&&t.errorData.errors&&u(P(t.errorData.errors)),d(!1)}};if(A)return e(D,{});const m=({name:w,value:t})=>{n({...r,[w]:t})};return e(E,{maxWidth:"xs",children:i("div",{className:s.paper,children:[e(x,{component:"h1",variant:"h5",children:o("Onboarding")}),e("form",{className:s.form,noValidate:!0,children:i(V,{children:[e(f,{children:e(h,{id:"email",name:"email",label:"email.address",autoComplete:"email",value:r.email,onChange:m,type:"email",autoFocus:!0,fullWidth:!0,required:!0,error:l("email")})}),e(C,{size:2}),e(f,{children:e(h,{id:"password",name:"password",label:"password",autoComplete:"current-password",value:r.password,onChange:m,type:"password",fullWidth:!0,required:!0,error:l("password")})}),e(C,{size:2}),e(f,{children:e(h,{id:"repeatPassword",name:"repeatPassword",label:"repeatPassword",value:r.repeatPassword,onChange:m,type:"password",fullWidth:!0,required:!0,error:l("repeatPassword")})}),e(S,{error:l("custom"),center:!0}),e(z,{fullWidth:!0,variant:"contained",color:"primary",className:s.submit,onClick:R,children:o("signUp")}),e(M,{})]})})]})})};export{Q as default};
