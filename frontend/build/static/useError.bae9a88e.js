import{a7 as I,r as g,a as q,a8 as v}from"./index.bb8b3d71.js";import{i as m,a as P,M as N,b as S,g as D,e as K,c as $,d as Z,f as B,h as X,j as Y,k as G,l as H,m as L,n as W}from"./isTypedArray.b72bae26.js";var J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/;function j(r,t){if(m(r))return!1;var n=typeof r;return n=="number"||n=="symbol"||n=="boolean"||r==null||P(r)?!0:Q.test(r)||!J.test(r)||t!=null&&r in Object(t)}var k="Expected a function";function A(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(k);var n=function(){var e=arguments,i=t?t.apply(this,e):e[0],s=n.cache;if(s.has(i))return s.get(i);var f=r.apply(this,e);return n.cache=s.set(i,f)||s,f};return n.cache=new(A.Cache||N),n}A.Cache=N;var rr=500;function tr(r){var t=A(r,function(e){return n.size===rr&&n.clear(),e}),n=t.cache;return t}var nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,er=/\\(\\)?/g,ir=tr(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(nr,function(n,e,i,s){t.push(i?s.replace(er,"$1"):e||n)}),t});const sr=ir;function or(r,t){for(var n=-1,e=r==null?0:r.length,i=Array(e);++n<e;)i[n]=t(r[n],n,r);return i}var ar=1/0,b=S?S.prototype:void 0,_=b?b.toString:void 0;function V(r){if(typeof r=="string")return r;if(m(r))return or(r,V)+"";if(P(r))return _?_.call(r):"";var t=r+"";return t=="0"&&1/r==-ar?"-0":t}function ur(r){return r==null?"":V(r)}function M(r,t){return m(r)?r:j(r,t)?[r]:sr(ur(r))}var fr=1/0;function R(r){if(typeof r=="string"||P(r))return r;var t=r+"";return t=="0"&&1/r==-fr?"-0":t}function cr(r,t){t=M(t,r);for(var n=0,e=t.length;r!=null&&n<e;)r=r[R(t[n++])];return n&&n==e?r:void 0}function c(r,t,n){var e=r==null?void 0:cr(r,t);return e===void 0?n:e}var lr=function(){try{var r=D(Object,"defineProperty");return r({},"",{}),r}catch{}}();const C=lr;function pr(r,t,n){t=="__proto__"&&C?C(r,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[t]=n}var gr=Object.prototype,dr=gr.hasOwnProperty;function hr(r,t,n){var e=r[t];(!(dr.call(r,t)&&K(e,n))||n===void 0&&!(t in r))&&pr(r,t,n)}function yr(r,t,n,e){if(!$(r))return r;t=M(t,r);for(var i=-1,s=t.length,f=s-1,o=r;o!=null&&++i<s;){var a=R(t[i]),l=n;if(a==="__proto__"||a==="constructor"||a==="prototype")return r;if(i!=f){var p=o[a];l=e?e(p,a,o):void 0,l===void 0&&(l=$(p)?p:Z(t[i+1])?[]:{})}hr(o,a,l),o=o[a]}return r}function u(r,t,n){return r==null?r:yr(r,t,n)}var Er="[object Map]",mr="[object Set]",wr=Object.prototype,xr=wr.hasOwnProperty;function U(r){if(r==null)return!0;if(B(r)&&(m(r)||typeof r=="string"||typeof r.splice=="function"||X(r)||Y(r)||G(r)))return!r.length;var t=H(r);if(t==Er||t==mr)return!r.size;if(L(r))return!W(r).length;for(var n in r)if(xr.call(r,n))return!1;return!0}const Pr={isEmail(r){return r&&!!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,30})+$/.test(r)},isEmpty(r){return r==null?void 0:r.length},isBoolean(r){return typeof r=="boolean"},isPassword(r){return r&&r.length>=8},isTrue(r){return!!r},isName(r){return r&&r.length&&r.length>=2},isAddress(r){return r&&r.length&&r.length>5},isCountry(r){return r&&r.length&&(r.length===2||r.length===3)},isUrl(r){return I.isUrl(r)},isUrlWithRelative(r){return r&&r[0]==="/"?!0:I.isUrl(r)},isZip(r){return r&&r.length>2},isAlphaNumeric(r){return r&&!!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(r)},isPhone(r){return!!parseInt(r)}},E={validate(r){const t={},n=(e,i)=>{const{text:s,type:f,value:o,customValidation:a}=e;c(t,i)||(a?a(o)||u(t,i,s):Pr[f](o)||u(t,i,s))};for(const[e,i]of Object.entries(r))Array.isArray(i)&&i.length?i.forEach(s=>{n(s,e)}):n(i,e);return U(t)?null:t},getError(r,t){return t?c(r,t,""):r},extendValidation(r,t,n){if(!this.getError(r))return t;if(!this.getError(t))return r;const e={};for(const[i]of Object.entries(n)){const s=c(t,i);s&&u(e,i,s),!s&&c(r,i)&&u(e,i,c(r,i))}return e}},Ar=(r,t)=>{const n={};return t&&r.forEach(e=>{v.exists(`errorDescription.${e}`)?u(n,e,`errorDescription.${e}`):c(t,e)?u(n,e,c(t,e).text):u(n,e,"field.notValidOrRequired")}),n},Sr=({values:r,validations:t,active:n=!1})=>{const[e,i]=g.exports.useState(null),[s,f]=g.exports.useState(null),[o,a]=g.exports.useState(null),[l,p]=g.exports.useState(n),{t:w}=q();g.exports.useEffect(()=>{if(U(r))i(null);else{const d={};for(const[x,y]of Object.entries(t)){const T=h=>({...h,text:h.text?w(h.text):w("field.notValidOrRequired"),value:c(r,x)});Array.isArray(y)&&y.length?u(d,x,y.map(h=>T(h))):u(d,x,T(y))}const O=E.validate(d);a(O),i(E.extendValidation(O,s,t))}},[r,w,s,n]);const z=d=>l?E.getError(e,d):null,F=g.exports.useCallback(()=>(p(!0),E.getError(o)),[o]);return{error:e,setCustomError:f,isError:z,errorActive:l,getActivateError:F,deactivateError:()=>{p(!1)},convertErrorArray:Ar}};export{Sr as u};
